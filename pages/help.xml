<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=us-ascii" http-equiv="content-type"/>
    <title>@PLUGIN_KEY@ Plugin</title>
    <link rel="stylesheet" href="../../plugins/@PLUGIN_NAME@/pluginhelp.css" type="text/css" media="screen"/>
</head>
<body>
<!--
    Generated by PluginWizardHelp
    https://github.com/electric-cloud/PluginWizardHelp
    Do *NOT* edit manually, use help file generation.
-->
<div class="help">
    <h1>@PLUGIN_KEY@</h1>
    <p>Plugin version @PLUGIN_VERSION@</p>
    
    <p>Revised on May 04, 2020</p>
    
    <hr style="margin-left: -10px; margin-top: 10px; height: 1px; width: 100%; color: #5981BD;" noshade="noshade"/>
    <h1>Contents</h1>
    <ul>
    
    <li><a href="#overview">Overview</a></li>
    
    
    
    
    
    
    
    
    <li><a href="#CreateConfiguration">Plugin Configuration</a></li>
    

    
    <li><a href="#procedures">Plugin Procedures</a></li>
    

    <ul>
        

        <li><a href="#CreateImage">Create Image</a></li>
        

        <li><a href="#StartInstances">Start Instances</a></li>
        

        <li><a href="#Provision">Provision</a></li>
        

        <li><a href="#ListInstances">List Instances</a></li>
        

        <li><a href="#RunScript">Run Script</a></li>
        

        <li><a href="#DeleteInstances">Delete Instances</a></li>
        

        <li><a href="#ResetInstances">Reset Instances</a></li>
        

        <li><a href="#StopInstances">Stop Instances</a></li>
        

        <li><a href="#Teardown">Teardown</a></li>
        
    </ul>

    

    
    
    
    
    
    
    
    <li><a href="#releaseNotes">Release Notes</a></li>
</ul>

    
    <h1>Overview</h1>
    <p><p> This plugin integrates with Google Cloud Platform to provision new resources from the pre-defined resource templates. </p>
</p>
    
    
    
    
    
    

    <!--TODO custom blocks-->

    
    <div id="CreateConfiguration">
        <a name='CreateConfiguration' id="CreateConfiguration"> </a>
        <h1>Plugin Configurations</h1>

        <p>
            Plugin configurations are sets of parameters that apply
            across some or all of the plugin procedures. They
            reduce repetition of common values, create
            predefined parameter sets for end users, and
            securely store credentials where needed. Each configuration
            is given a unique name that is entered in designated
            parameters on procedures that use them.<br /><br />
        </p>

        <h3>Creating Plugin Configurations</h3>
        <p>To create plugin configurations in CloudBees CD,
            do these steps:</p>

        <li>Go to <b>Administration</b> &gt; <b>Plugins</b> to open the Plugin Manager.</li>
        <li>Find the @PLUGIN_NAME@ row.</li>
        <li>Click <b>Configure</b> to open the
             Configurations page.</li>
        <li>Click <b>Create Configuration</b> as per the description of parameters below.</li>
        

        <h2>Configuration Procedure Parameters</h2>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                    <td class="required">Configuration Name</td>
                    <td>The name for the created configuration</td>
                
            </tr>
            
            <tr>
                
                    <td >Description</td>
                    <td>Description for the configuration</td>
                
            </tr>
            
            <tr>
                
                    <td class="required">Project Id</td>
                    <td>Project ID of the project in GCP under which Instances are provisioned.</td>
                
            </tr>
            
            <tr>
                
                    <td class="required">Zone</td>
                    <td>Zone name, e.g. us-east1-b</td>
                
            </tr>
            
            <tr>
                
                    <td class="required">Credential</td>
                    <td>Service account key in JSON format. For example,<br/><pre>
{
  &quot;type&quot;: &quot;service_account&quot;,
  &quot;project_id&quot;: &quot;PROJECT ID&quot;,
  &quot;private_key_id&quot;: &quot;PRIVATE KEY ID&quot;,
  &quot;private_key&quot;: &quot;-----BEGIN PRIVATE KEY-----PRIVATE KEY CONTENT-----END PRIVATE KEY-----\n&quot;,
  &quot;client_email&quot;: &quot;SERVICE ACCOUNT NAME@PROJECT ID.iam.gserviceaccount.com&quot;,
  &quot;client_id&quot;: &quot;CLIENT ID&quot;,
  &quot;auth_uri&quot;: &quot;https://accounts.google.com/o/oauth2/auth&quot;,
  &quot;token_uri&quot;: &quot;https://oauth2.googleapis.com/token&quot;,
  &quot;auth_provider_x509_cert_url&quot;: &quot;https://www.googleapis.com/oauth2/v1/certs&quot;,
  &quot;client_x509_cert_url&quot;: &quot;https://www.googleapis.com/robot/v1/metadata/x509/ACCOUNT ID&quot;
}
</pre></td>
                
            </tr>
            
            <tr>
                
                    <td >Check Connection?</td>
                    <td>If checked, the connection endpoint and credentials entered as part of the configuration will be tested. If this option is checked, configuration will not be saved if the test fails.</td>
                
            </tr>
            
            <tr>
                
                    <td >Debug Level</td>
                    <td>This option sets debug level for logs. If info is selected, only summary information will be shown, for debug, there will be some debug information and for trace the whole requests and responses will be shown.</td>
                
            </tr>
            
            </tbody>
        </table>
        
    </div>
    

    

    <h1 id="procedures">Plugin Procedures</h1>
    
    
    <p>
        <p><strong>IMPORTANT</strong> Note that the names of Required parameters are marked in <strong><em>bold italics</em></strong> in the parameter description table for each procedure.</p>

    </p>
    

    
    <div id="CreateImage">
        <h2>Create Image</h2>
        
        
        <p>Creates a new Virtual Machine image in GCP</p>
        
        
        <h3>Create Image Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td >Family</td>
                <td>Name of the Image family.
Either image family name or image name should be provided.
If the image name is not provided, it will be calculated from the family name.
</td>
                
            </tr>
            
            <tr>
                
                <td >Name</td>
                <td>Name of the image.
Either image family name or image name should be provided.
If the image name is not provided, it will be calculated from the family name.
</td>
                
            </tr>
            
            <tr>
                
                <td >Source</td>
                <td>Source from which Image is created. It should be one of the following:
<ul><li>Source Disk</li><li>Source Snapshot</li><li>Source Image</li></ul></td>
                
            </tr>
            
            <tr>
                
                <td >Source Disk</td>
                <td>Name of the Source Disk.</td>
                
            </tr>
            
            <tr>
                
                <td >Disk Zone</td>
                <td>Zone of the Source Disk.
If Source Disk is chosen, this field should be specified.
</td>
                
            </tr>
            
            <tr>
                
                <td >Source Snapshot</td>
                <td>Snapshot for the source image.</td>
                
            </tr>
            
            <tr>
                
                <td >Source Image</td>
                <td>Name of the Source image.</td>
                
            </tr>
            
            <tr>
                
                <td >Description</td>
                <td>Description for the new image.</td>
                
            </tr>
            
            <tr>
                
                <td >Disk Size (GB)</td>
                <td>Disk size in GB</td>
                
            </tr>
            
            <tr>
                
                <td >Deprecate Old Image?</td>
                <td>If checked, the old image from the same family will be deprecated and replaced with the new image</td>
                
            </tr>
            
            <tr>
                
                <td >Force Create?</td>
                <td>If checked, the image will be created even if the disk is in use by a running instance.</td>
                
            </tr>
            
            <tr>
                
                <td >Locations</td>
                <td>Space or newline-separated zone names for the new image. By default the new image will be multi-zonal.</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    
    <div id="StartInstances">
        <h2>Start Instances</h2>
        
        
        <p>Starts one or more Virtual Machine Instances in GCP.</p>
        
        
        <h3>Start Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Instance Names</td>
                <td>Instance name.<br/>
In case of multiple instances, specify one instance name per line.
</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Result Property Sheet</td>
                <td>Property Sheet to store instances that are started in JSON format.
</td>
                
            </tr>
            
            </tbody>
        </table>

        
        <h4>Output Parameters</h4>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                <td>instances</td>
                <td>JSON representation of instances</td>
            </tr>
            
            </tbody>
        </table>
        

        
    </div>

    
    <div id="Provision">
        <h2>Provision</h2>
        
        
        <p>Creates one or more Virtual Machine instances.</p>
        
        
        <h3>Provision Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td >Instance Name Template</td>
                <td>Name of the instance template e.g. my-instance-1.<br/>
The instance name is typically generated by adding a random string to the end of this name.
</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Instance Type</td>
                <td>Instance type, e.g. n1-standard-2</td>
                
            </tr>
            
            <tr>
                
                <td >Source Image</td>
                <td>Source image starting with a project name, e.g. my-project/global/images/image-name.<br/>
Either URL or family should be provided.
</td>
                
            </tr>
            
            <tr>
                
                <td >Source Image Project</td>
                <td>Project to which Source Image belongs.<br/>
If not specified, the project from the configuration will be used.
</td>
                
            </tr>
            
            <tr>
                
                <td >Source Image Family</td>
                <td>Source Image family.<br/>
Either the family or a URL should be provided.
</td>
                
            </tr>
            
            <tr>
                
                <td >Keys</td>
                <td>SSH keys in JSON format, e.g. [{"userName": "user", "key": "ssh-rsa ....."}]
</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Network</td>
                <td>The name of the VPC network, e.g. default.</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Subnetwork</td>
                <td>The name of the VPC subnetwork</td>
                
            </tr>
            
            <tr>
                
                <td >Disk Size</td>
                <td>Instace disk size in Gb</td>
                
            </tr>
            
            <tr>
                
                <td >Instance Tags</td>
                <td>Instance tags, newline-separated, e.g. my-tag1</td>
                
            </tr>
            
            <tr>
                
                <td >Assign Public IP?</td>
                <td>If checked, a NAT network interface will be attached to the instance.</td>
                
            </tr>
            
            <tr>
                
                <td >Use Service Account</td>
                <td>If specified, the Service Account used to provision the virtual machine.
Options are as follows.<br/><br/><ul><li>None - No Service Account is used.</li><li>Same - Use the Service Account as in the plugin configuration.</li><li>Another - Use the Service account as specified in the Service Account email field. In this case the expectation is that the Service Account used in the plugin configuration has privileges to access this other service account.</li></ul></td>
                
            </tr>
            
            <tr>
                
                <td >Service Account Email</td>
                <td>Service account email to use with the provisioned machine.</td>
                
            </tr>
            
            <tr>
                
                <td >Protect from Deletion?</td>
                <td>If checked, the instance will be protected from deletion.</td>
                
            </tr>
            
            <tr>
                
                <td >Hostname</td>
                <td>Hostname for the instance</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Count</td>
                <td>The number of instances to create.</td>
                
            </tr>
            
            <tr>
                
                <td >Ping Resource?</td>
                <td>If checked, the resource will be pinged and the job will finish successfully only when the resource is up and running.</td>
                
            </tr>
            
            <tr>
                
                <td >Timeout in Seconds</td>
                <td>If specified, time to wait for provisioning to finish (in seconds).
</td>
                
            </tr>
            
            <tr>
                
                <td >Resource Pool Name</td>
                <td>If specified, the resource will be created for the instance and placed into this pool.</td>
                
            </tr>
            
            <tr>
                
                <td ></td>
                <td>Agent port for the created resource.</td>
                
            </tr>
            
            <tr>
                
                <td >Resource Workspace</td>
                <td>Workspace name for the created resource.</td>
                
            </tr>
            
            <tr>
                
                <td >Resource Zone</td>
                <td>Zone to use for the created resource</td>
                
            </tr>
            
            <tr>
                
                <td >Result Property</td>
                <td>Property sheet to store instance result.</td>
                
            </tr>
            
            </tbody>
        </table>

        
        <h4>Output Parameters</h4>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                <td>instanceDetails</td>
                <td>Details of the Instance created.</td>
            </tr>
            
            </tbody>
        </table>
        

        
    </div>

    
    <div id="ListInstances">
        <h2>List Instances</h2>
        
        
        <p>List Virtual Machine instances in GCP.</p>
        
        
        <h3>List Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td >Filter</td>
                <td>Filter expression used to filter resources. The filter expression must specify the field name,
a comparison operator, and the value used to filter them.<br/><br/>
The value must be a string, a number, or a boolean and the comparison operator must be either =, !=, &gt;, or &lt;.<br/>
For example, name != foobar-instance will exclude all Virtual Instances named foobar-instance.
</td>
                
            </tr>
            
            <tr>
                
                <td >Max Results</td>
                <td>The maximum number of results per page that should be returned. If the number of available results is larger than maxResults, Compute Engine returns a nextPageToken that can be used to get the next page of results in subsequent list requests. Acceptable values are 0 to 500, inclusive. (Default: 500)
</td>
                
            </tr>
            
            <tr>
                
                <td >Order By</td>
                <td>Order used to sort results.

By default results are sorted in alphanumerical order of resource name. In addition results can be sorted in descending order of time stamp by using orderBy="creationTimestamp desc". This sorts results based on the creationTimestamp field in reverse chronological order (newest result first).

Currently, only sorting by name or creationTimestamp desc is supported.
</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Result Property Sheet</td>
                <td>Property Sheet used to store JSON representation of instances found.</td>
                
            </tr>
            
            </tbody>
        </table>

        
        <h4>Output Parameters</h4>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                <td>instances</td>
                <td>JSON representation of instances found.</td>
            </tr>
            
            </tbody>
        </table>
        

        
    </div>

    
    <div id="RunScript">
        <h2>Run Script</h2>
        
        
        <p>Runs a custom groovy script using the GCP client.</p>
        
        
        <h3>Run Script Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Script</td>
                <td>Script to evaluate.
This is an example:
<pre>
println &quot;Compute raw client: $compute&quot;
println &quot;Project ID: $project&quot;
println &quot;Zone: $zone&quot;
println &quot;Flow Client: $ef&quot;
println &quot;Compute Wrapper: $wrapper&quot;
</pre></td>
                
            </tr>
            
            </tbody>
        </table>

        
        <h4>Output Parameters</h4>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                <td>output</td>
                <td>Some output parameter to use in the script. Evaluation result (the last value returned by the script) will be saved into this parameter.</td>
            </tr>
            
            </tbody>
        </table>
        

        
    </div>

    
    <div id="DeleteInstances">
        <h2>Delete Instances</h2>
        
        
        <p>Destroys one or more Virtual Machine Instances in GCP.</p>
        
        
        <h3>Delete Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Instance Names</td>
                <td>Instance name.<br/>
In case of multiple instances, specify one instance name per line.
</td>
                
            </tr>
            
            <tr>
                
                <td >Timeout in Seconds</td>
                <td>Time (in seconds) to wait for instances to be deleted.</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    
    <div id="ResetInstances">
        <h2>Reset Instances</h2>
        
        
        <p>Reset one or more Virtual Machine Instances in GCP.</p>
        
        
        <h3>Reset Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required"></td>
                <td>Instance name.<br/>
In case of multiple instances, specify one instance name per line.
</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    
    <div id="StopInstances">
        <h2>Stop Instances</h2>
        
        
        <p>Stops one or more Virtual Machine Instances in GCP.</p>
        
        
        <h3>Stop Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Instance Names</td>
                <td>Instance name.
In case of multiple instances, specify one instance name per line.
</td>
                
            </tr>
            
            <tr>
                
                <td >Timeout</td>
                <td>Time (in seconds) to wait for instances to be deleted.</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    
    <div id="Teardown">
        <h2>Teardown</h2>
        
        
        <p>Deletes Virtual Machines Instance or Instances that correspond to either a Flow Resource or a Flow Resource Pool.
This procedure essentially calls the Delete Instance procedure followed by removing the Resource from Flow.
</p>
        
        
        <h3>Teardown Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Resource name or pool name</td>
                <td>Flow resource name or pool name</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    

    

    

    

    
    
    
    

    <h1 id="releaseNotes">Release Notes</h1>
    
    <h3>@PLUGIN_KEY@ 1.1.0</h3>
    <ul>
        
        <li>Added pingResource parameter to the Provision procedure: now resource is pinged for availability.</li>
        
    </ul>
    
    <h3>@PLUGIN_KEY@ 1.0.0</h3>
    <ul>
        
        <li>Introduced the EC-GCP-Provision plugin.</li>
        
    </ul>
    
</div>
</body>
</html>
