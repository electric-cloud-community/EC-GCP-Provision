<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=us-ascii" http-equiv="content-type"/>
    <title>@PLUGIN_KEY@ Plugin</title>
    <link rel="stylesheet" href="../../plugins/@PLUGIN_NAME@/pluginhelp.css" type="text/css" media="screen"/>
</head>
<body>
<!--
    Generated by PluginWizardHelp
    https://github.com/electric-cloud/PluginWizardHelp
    Do *NOT* edit manually, use help file generation.
-->
<div class="help">
    <h1>@PLUGIN_KEY@</h1>
    <p>Plugin version @PLUGIN_VERSION@</p>
    
    <p>Revised on Mar 27, 2020</p>
    
    <hr style="margin-left: -10px; margin-top: 10px; height: 1px; width: 100%; color: #5981BD;" noshade="noshade"/>
    <h1>Contents</h1>
    <ul>
    
    <li><a href="#overview">Overview</a></li>
    
    
    
    
    
    
    
    
    <li><a href="#CreateConfiguration">Plugin Configuration</a></li>
    

    
    <li><a href="#procedures">Plugin Procedures</a></li>
    

    <ul>
        

        <li><a href="#CreateImage">Create Image</a></li>
        

        <li><a href="#StartInstances">Start Instances</a></li>
        

        <li><a href="#Provision">Provision</a></li>
        

        <li><a href="#ListInstances">List Instances</a></li>
        

        <li><a href="#RunScript">Run Script</a></li>
        

        <li><a href="#DeleteInstances">Delete Instances</a></li>
        

        <li><a href="#ResetInstances">Reset Instances</a></li>
        

        <li><a href="#StopInstances">Stop Instances</a></li>
        

        <li><a href="#Teardown">Teardown</a></li>
        
    </ul>

    

    
    
    
    
    
    
    <li><a href="#knownIssues">Known Issues</a></li>
    
    
    <li><a href="#releaseNotes">Release Notes</a></li>
</ul>

    
    <h1>Overview</h1>
    <p><p> This plugin integrates with Google Cloud Platform to provision new resources from the pre-defined resource templates. </p>
</p>
    
    
    
    
    
    

    <!--TODO custom blocks-->

    
    <div id="CreateConfiguration">
        <a name='CreateConfiguration' id="CreateConfiguration"> </a>
        <h1>Plugin Configurations</h1>

        <p>
            Plugin configurations are sets of parameters that apply
            across some or all of the plugin procedures. They
            reduce repetition of common values, create
            predefined parameter sets for end users, and
            securely store credentials where needed. Each configuration
            is given a unique name that is entered in designated
            parameters on procedures that use them.<br /><br />
        </p>

        <h3>Creating Plugin Configurations</h3>
        <p>To create plugin configurations in CloudBees Flow,
            do these steps:</p>

        <li>Go to <b>Administration</b> &gt; <b>Plugins</b> to open the Plugin Manager.</li>
        <li>Find the @PLUGIN_NAME@ row.</li>
        <li>Click <b>Configure</b> to open the
             Configurations page.</li>
        <li>Click <b>Create Configuration</b> as per the description of parameters below.</li>
        
        Configuration Parameters
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                    <td class="required">Configuration Name</td>
                    <td>The name for the created configuration</td>
                
            </tr>
            
            <tr>
                
                    <td >Description</td>
                    <td>Description for the configuration</td>
                
            </tr>
            
            <tr>
                
                    <td class="required">Project Id</td>
                    <td>Project ID for the main project</td>
                
            </tr>
            
            <tr>
                
                    <td class="required">Zone</td>
                    <td>Zone name, e.g. us-east1-b</td>
                
            </tr>
            
            <tr>
                
                    <td class="required">Credential</td>
                    <td>Service account key in JSON format</td>
                
            </tr>
            
            <tr>
                
                    <td >Check Connection?</td>
                    <td>If checked, a connection endpoint and credentials will be tested before save. The configuration will not be saved if the test fails.</td>
                
            </tr>
            
            <tr>
                
                    <td >Debug Level</td>
                    <td>This option sets debug level for logs. If info is selected, only summary information will be shown, for debug, there will be some debug information and for trace the whole requests and responses will be shown.</td>
                
            </tr>
            
            </tbody>
        </table>
        
    </div>
    

    

    <h1 id="procedures">Plugin Procedures</h1>
    
    

    
    <div id="CreateImage">
        <h2>Create Image</h2>
        
        
        <p>Creates a new image</p>
        
        
        <h3>Create Image Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td >Family</td>
                <td>Image family for the new image. If the image name is not provided the new image name will be calculate from the
family name. Either image name or a family name must be provided.
</td>
                
            </tr>
            
            <tr>
                
                <td >Name</td>
                <td>Name for the new image. If the name is not provided, the family must be provided and the
image name will be calculated from the family name.
Either image name or a family name must be provided.
</td>
                
            </tr>
            
            <tr>
                
                <td >Source</td>
                <td></td>
                
            </tr>
            
            <tr>
                
                <td >Source Disk</td>
                <td>Source disk name for the image.</td>
                
            </tr>
            
            <tr>
                
                <td ></td>
                <td>Zone for the source disk if the source disk is used.</td>
                
            </tr>
            
            <tr>
                
                <td >Source Snapshot</td>
                <td>Snapshot for the source image.</td>
                
            </tr>
            
            <tr>
                
                <td >Source Image</td>
                <td>Source image name</td>
                
            </tr>
            
            <tr>
                
                <td >Description</td>
                <td>Description for the new image.</td>
                
            </tr>
            
            <tr>
                
                <td >Disk Size (GB)</td>
                <td>Disk size in GB</td>
                
            </tr>
            
            <tr>
                
                <td >Deprecate Old Image?</td>
                <td>If checked, the old image from the same family will be deprecated and replaced with the new image</td>
                
            </tr>
            
            <tr>
                
                <td >Force Create?</td>
                <td>If checked, the image will be created if the disk is in use by a running instance.
</td>
                
            </tr>
            
            <tr>
                
                <td >Locations</td>
                <td>Space or newline-separated zone names for the new image. By default the new image will be multi-zonal.</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    
    <div id="StartInstances">
        <h2>Start Instances</h2>
        
        
        <p>Starts GCP instances</p>
        
        
        <h3>Start Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Instance Names</td>
                <td>Newline separated instance names</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Result Property Sheet</td>
                <td></td>
                
            </tr>
            
            </tbody>
        </table>

        
        <h4>Output Parameters</h4>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                <td>instances</td>
                <td>JSON representation of instances</td>
            </tr>
            
            </tbody>
        </table>
        

        
    </div>

    
    <div id="Provision">
        <h2>Provision</h2>
        
        
        <p>Creates one or few instances from the provided parameters</p>
        
        
        <h3>Provision Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td >Instance Name Template</td>
                <td>Template for instance name, e.g. my-instance-1. The instance name will be generated by adding a random number to the end of this template.</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Instance Type</td>
                <td>Instance type, e.g. n1-standard-2</td>
                
            </tr>
            
            <tr>
                
                <td >Source Image</td>
                <td>Source image starting with a project name, e.g. my-project/global/images/image-name. Either URL or family should be provided.</td>
                
            </tr>
            
            <tr>
                
                <td >Source Image Project</td>
                <td>Source image project. If not set, the project from the configuration will be used.</td>
                
            </tr>
            
            <tr>
                
                <td >Source Image Family</td>
                <td>Source image family. Either family or URL should be provided.</td>
                
            </tr>
            
            <tr>
                
                <td >Keys</td>
                <td>SSH keys in JSON format, e.g. [{"userName": "user", "key": "ssh-rsa ....."}]
</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Network</td>
                <td>The name of VPC network, e.g. default</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Subnetwork</td>
                <td>The name of VPC subnetwork</td>
                
            </tr>
            
            <tr>
                
                <td >Disk Size</td>
                <td>Instace disk size in Gb</td>
                
            </tr>
            
            <tr>
                
                <td >Instance Tags</td>
                <td>Instance tags, newline-separated, e.g. my-tag1</td>
                
            </tr>
            
            <tr>
                
                <td >Assign Public IP?</td>
                <td>If checked, the a NAT network interface will be attached to the instance.</td>
                
            </tr>
            
            <tr>
                
                <td >Use Service Account</td>
                <td>Which service account will be used by the provisioned machine. If same service account is chosen, the service account that
is provided by the plugin configuration will be used. If another service account is chosen, the service account in the plugin configuration
must have access to this service account.
</td>
                
            </tr>
            
            <tr>
                
                <td >Service Account Email</td>
                <td>Service account email to use with the provisioned machine.</td>
                
            </tr>
            
            <tr>
                
                <td >Protect from Deletion?</td>
                <td>If checked, the instance will be protected from deletion.</td>
                
            </tr>
            
            <tr>
                
                <td >Hostname</td>
                <td>Hostname for the instance</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Count</td>
                <td>The number of instances to create.</td>
                
            </tr>
            
            <tr>
                
                <td >Timeout in Seconds</td>
                <td>Time to wait for the operation to finish (in seconds). Please note that the resource availability is NOT checked.</td>
                
            </tr>
            
            <tr>
                
                <td >Resource Pool Name</td>
                <td>If provided, a resource will be created for the instance and placed into this pool.</td>
                
            </tr>
            
            <tr>
                
                <td ></td>
                <td>Agent port for the created resource.</td>
                
            </tr>
            
            <tr>
                
                <td >Resource Workspace</td>
                <td>Workspace name for the resource.</td>
                
            </tr>
            
            <tr>
                
                <td >Resource Zone</td>
                <td>Zone to use for the created resource</td>
                
            </tr>
            
            <tr>
                
                <td >Result Property</td>
                <td>Property sheet to store instance result</td>
                
            </tr>
            
            </tbody>
        </table>

        
        <h4>Output Parameters</h4>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                <td>instanceDetails</td>
                <td>Details for the created instances</td>
            </tr>
            
            </tbody>
        </table>
        

        
    </div>

    
    <div id="ListInstances">
        <h2>List Instances</h2>
        
        
        <p>Lists instances for the provided parameters</p>
        
        
        <h3>List Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td >Filter</td>
                <td>A filter expression that filters resources listed in the response. The expression must specify the field name, a comparison operator, and the value that you want to use for filtering. The value must be a string, a number, or a boolean. The comparison operator must be either =, !=, &gt;, or &lt;.

For example, if you are filtering Compute Engine instances, you can exclude instances named example-instance by specifying name != example-instance.
</td>
                
            </tr>
            
            <tr>
                
                <td >Max Results</td>
                <td>The maximum number of results per page that should be returned. If the number of available results is larger than maxResults, Compute Engine returns a nextPageToken that can be used to get the next page of results in subsequent list requests. Acceptable values are 0 to 500, inclusive. (Default: 500)
</td>
                
            </tr>
            
            <tr>
                
                <td >Order By</td>
                <td>Sorts list results by a certain order. By default, results are returned in alphanumerical order based on the resource name.

You can also sort results in descending order based on the creation timestamp using orderBy="creationTimestamp desc". This sorts results based on the creationTimestamp field in reverse chronological order (newest result first). Use this to sort resources like operations so that the newest operation is returned first.

Currently, only sorting by name or creationTimestamp desc is supported.
</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Result Property Sheet</td>
                <td></td>
                
            </tr>
            
            </tbody>
        </table>

        
        <h4>Output Parameters</h4>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                <td>instances</td>
                <td>JSON representation of instances found</td>
            </tr>
            
            </tbody>
        </table>
        

        
    </div>

    
    <div id="RunScript">
        <h2>Run Script</h2>
        
        
        <p>Runs a custom groovy script with the prepared GCP client</p>
        
        
        <h3>Run Script Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Script</td>
                <td>Script to evaluate. The following variables are accessible:

compute - compute client
ef - ElectricFlow Groovy API client
zone - zone name from the configuration
project - project ID from the configuration
wrapper - Compute wrapper from this plugin

Both wrapper and compute clients are already initialized.
</td>
                
            </tr>
            
            </tbody>
        </table>

        
        <h4>Output Parameters</h4>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                <td>output</td>
                <td>Some output parameter to use in the script</td>
            </tr>
            
            </tbody>
        </table>
        

        
    </div>

    
    <div id="DeleteInstances">
        <h2>Delete Instances</h2>
        
        
        <p>Destroys GCP machines</p>
        
        
        <h3>Delete Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Instance Names</td>
                <td>Newline-separated instance names to delete</td>
                
            </tr>
            
            <tr>
                
                <td >Timeout in Seconds</td>
                <td>Timeout to wait for instances to be deleted in seconds</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    
    <div id="ResetInstances">
        <h2>Reset Instances</h2>
        
        
        <p>Reset GCP instances</p>
        
        
        <h3>Reset Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required"></td>
                <td>Newline-separated instance names</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    
    <div id="StopInstances">
        <h2>Stop Instances</h2>
        
        
        <p>Stops GCP instances</p>
        
        
        <h3>Stop Instances Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Configuration Name</td>
                <td>Previously defined configuration for the plugin</td>
                
            </tr>
            
            <tr>
                
                <td class="required">Instance Names</td>
                <td>Newline separated instance names</td>
                
            </tr>
            
            <tr>
                
                <td >Timeout</td>
                <td>Timeout in seconds to wait for the instances to stop. -1 means no timeout.</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    
    <div id="Teardown">
        <h2>Teardown</h2>
        
        
        <p>Deletes machines from the resource pool or the specified resource</p>
        
        
        <h3>Teardown Parameters</h3>
        <table class="grid">
            <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            
            <tr>
                
                <td class="required">Flow resource name or pool name</td>
                <td>Flow resource name or pool name</td>
                
            </tr>
            
            </tbody>
        </table>

        

        
    </div>

    

    

    

    

    
    
    
    <h1 id="knownIssues">Known Issues</h1>
    <div>
        <p>NA</p>

    </div>
    
    

    <h1 id="releaseNotes">Release Notes</h1>
    
    <h3>@PLUGIN_KEY@ 1.0.1</h3>
    <ul>
        
        <li>Help document Added.</li>
        
    </ul>
    
    <h3>@PLUGIN_KEY@ 1.0.0</h3>
    <ul>
        
        <li>Introduced the EC-GCP-Provision plugin.</li>
        
    </ul>
    
</div>
</body>
</html>
